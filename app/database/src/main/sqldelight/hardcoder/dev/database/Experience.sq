import kotlinx.datetime.Instant;
import kotlin.Int;
import kotlin.Float;
import kotlin.Boolean;

CREATE TABLE IF NOT EXISTS Experience(
    id INTEGER AS Int NOT NULL PRIMARY KEY,
    featureTypeId INTEGER AS Int NOT NULL,
    linkedTrackId INTEGER AS Int NOT NULL,
    date INTEGER AS Instant NOT NULL,
    experiencePointsAmount REAL AS Float NOT NULL,
    isCollected INTEGER AS Boolean NOT NULL
);

insert:
INSERT INTO Experience (id, featureTypeId, linkedTrackId, date, experiencePointsAmount, isCollected)
VALUES (?, ?, ?, ?, ?, ?);

collect:
UPDATE Experience SET isCollected = TRUE WHERE featureTypeId = ?;

provideAllExperiencesByDate:
SELECT * FROM Experience WHERE isCollected = ? AND featureTypeId = ? AND date BETWEEN ? AND ?;

isTrackCollected:
SELECT EXISTS (SELECT * FROM Experience WHERE isCollected = TRUE AND linkedTrackId = ? AND featureTypeId = ?);