import kotlin.Int;
import kotlin.Float;
import kotlin.Boolean;
import kotlinx.datetime.Instant;

CREATE TABLE IF NOT EXISTS Currency(
    id INTEGER AS Int NOT NULL PRIMARY KEY,
    featureTypeId INTEGER AS Int NOT NULL,
    linkedTrackId INTEGER AS Int NOT NULL,
    date INTEGER AS Instant NOT NULL,
    currencyTypeId INTEGER AS Int NOT NULL,
    currencyAmount REAL AS Float NOT NULL,
    isCollected INTEGER AS Boolean NOT NULL
);

insert:
INSERT INTO Currency (id, featureTypeId, linkedTrackId, date, currencyTypeId, currencyAmount, isCollected)
VALUES (?,  ?, ?, ?, ?, ?, ?);

collect:
UPDATE Currency SET isCollected = TRUE WHERE featureTypeId = ?;

provideAllCoinsByDate:
SELECT * FROM Currency WHERE isCollected = ? AND featureTypeId = ? AND currencyTypeId = ? AND date BETWEEN ? AND ?;

isTrackCollected:
SELECT EXISTS (SELECT * FROM Currency WHERE isCollected = TRUE AND linkedTrackId = ? AND featureTypeId = ?);